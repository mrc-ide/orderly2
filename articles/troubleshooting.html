<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Troubleshooting • orderly2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Troubleshooting">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orderly2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.99.81</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/orderly2.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to orderly2</a></li>
    <li><a class="dropdown-item" href="../articles/dependencies.html">Dependencies between packets</a></li>
    <li><a class="dropdown-item" href="../articles/collaboration.html">Collaborative analysis</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/migrating.html">Migrating from orderly (1.x)</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Outpack metadata</a></li>
    <li><a class="dropdown-item" href="../articles/query.html">Orderly query DSL</a></li>
    <li><a class="dropdown-item" href="../articles/plugins.html">Creating plugins</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/orderly2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Troubleshooting</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/orderly2/blob/main/vignettes/troubleshooting.Rmd" class="external-link"><code>vignettes/troubleshooting.Rmd</code></a></small>
      <div class="d-none name"><code>troubleshooting.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mrc-ide/orderly2" class="external-link">orderly2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="outpack-files-accidentally-committed-to-git">Outpack files accidentally committed to git<a class="anchor" aria-label="anchor" href="#outpack-files-accidentally-committed-to-git"></a>
</h2>
<p>As discussed in <a href="/orderly2/articles/introduction.html#interaction-with-version-control">the
orderly introduction</a>, you do not want to commit any files from
<code>.outpack/</code>, <code>drafts/</code> or <code>archive/</code>
(if used) to git as this will create all sorts of problems down the
line.</p>
<p>If you were directed here, it is probably because you have ended up
with these files in git and want to undo this situation. The least
painful way depends on your situation.</p>
<p>We have now put in guard rails to try and prevent this happening, but
it could still happen to you if you modify the <code>.gitignore</code>
file or force-add files for example.</p>
<p>Once you are in this situation, <code>orderly2</code> will shout at
you:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">orderly2</span><span class="fu">::</span><span class="fu"><a href="../reference/orderly_run.html">orderly_run</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `orderly2::orderly_run()`:</span></span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> Detected 6 outpack files committed to git</span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> Detected files were found in '.outpack/' and 'simple/'</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> For tips on resolving this, please see</span></span>
<span><span class="co">##   <span style="color: #0000BB; font-style: italic;">&lt;https://mrc-ide.github.io/orderly2/articles/troubleshooting.html&gt;</span></span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> Found: .outpack/config.json, .outpack/index/outpack.rds,</span></span>
<span><span class="co">##   .outpack/location/local/20250901-150722-ea1284f9,</span></span>
<span><span class="co">##   .outpack/metadata/20250901-150722-ea1284f9,</span></span>
<span><span class="co">##   simple/data/20250901-150722-ea1284f9/data.R, and</span></span>
<span><span class="co">##   simple/data/20250901-150722-ea1284f9/data.rds</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> To turn this into a warning and continue anyway set the option</span></span>
<span><span class="co">##   'orderly_git_error_is_warning' to TRUE by running</span></span>
<span><span class="co">##   `options(orderly_git_error_is_warning = TRUE)`</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> To disable this check, set the option 'orderly_git_error_ignore' to TRUE by</span></span>
<span><span class="co">##   running `options(orderly_git_error_ignore = TRUE)`</span></span></code></pre></div>
<p>which may have directed you to this very page. If you just want to
continue working anyway, then run the suggested command:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>orderly_git_error_is_warning <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>after which things will work with a warning the first time that
session:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">orderly2</span><span class="fu">::</span><span class="fu"><a href="../reference/orderly_run.html">orderly_run</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="co">## Warning in orderly2::orderly_run("data"): Detected 6 outpack files committed to git</span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> Detected files were found in '.outpack/' and 'simple/'</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> For tips on resolving this, please see</span></span>
<span><span class="co">##   <span style="color: #0000BB; font-style: italic;">&lt;https://mrc-ide.github.io/orderly2/articles/troubleshooting.html&gt;</span></span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> Found: .outpack/config.json, .outpack/index/outpack.rds,</span></span>
<span><span class="co">##   .outpack/location/local/20250901-150722-ea1284f9,</span></span>
<span><span class="co">##   .outpack/metadata/20250901-150722-ea1284f9,</span></span>
<span><span class="co">##   simple/data/20250901-150722-ea1284f9/data.R, and</span></span>
<span><span class="co">##   simple/data/20250901-150722-ea1284f9/data.rds</span></span>
<span><span class="co">## <span style="color: #555555;">This warning is displayed once per session.</span></span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> Wrote '.gitignore'</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Starting packet '<span style="color: #0000BB;">data</span>' `20250901-150723-62e28382` at 2025-09-01 15:07:23.390749</span></span>
<span><span class="co">## &gt; orderly_description(</span></span>
<span><span class="co">## +   display = "A demo data set")</span></span>
<span><span class="co">## &gt; x &lt;- jitter(1:30)</span></span>
<span><span class="co">## &gt; y &lt;- 0.4 * x + 5 + rnorm(length(x), sd = 2)</span></span>
<span><span class="co">## &gt; d &lt;- data.frame(x, y)</span></span>
<span><span class="co">## &gt; orderly_artefact("data.rds", description = "A synthetic dataset")</span></span>
<span><span class="co">## &gt; saveRDS(d, "data.rds")</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> Finished running <span style="color: #0000BB;">data.R</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Finished 20250901-150723-62e28382 at 2025-09-01 15:07:23.429463 (0.03871417 secs)</span></span>
<span><span class="co">## [1] "20250901-150723-62e28382"</span></span></code></pre></div>
<p>subsequent calls will not display the warning:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">orderly2</span><span class="fu">::</span><span class="fu"><a href="../reference/orderly_run.html">orderly_run</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Starting packet '<span style="color: #0000BB;">data</span>' `20250901-150723-8a0d059b` at 2025-09-01 15:07:23.543779</span></span>
<span><span class="co">## &gt; orderly_description(</span></span>
<span><span class="co">## +   display = "A demo data set")</span></span>
<span><span class="co">## &gt; x &lt;- jitter(1:30)</span></span>
<span><span class="co">## &gt; y &lt;- 0.4 * x + 5 + rnorm(length(x), sd = 2)</span></span>
<span><span class="co">## &gt; d &lt;- data.frame(x, y)</span></span>
<span><span class="co">## &gt; orderly_artefact("data.rds", description = "A synthetic dataset")</span></span>
<span><span class="co">## &gt; saveRDS(d, "data.rds")</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> Finished running <span style="color: #0000BB;">data.R</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Finished 20250901-150723-8a0d059b at 2025-09-01 15:07:23.567218 (0.02343917 secs)</span></span>
<span><span class="co">## [1] "20250901-150723-8a0d059b"</span></span></code></pre></div>
<p>The rest of this section discusses how you might permanently fix the
issue.</p>
<div class="section level3">
<h3 id="i-dont-care-about-my-history-at-all">I don’t care about my history at all<a class="anchor" aria-label="anchor" href="#i-dont-care-about-my-history-at-all"></a>
</h3>
<p>This is the case if you have just started a project, and are not yet
collaborating on it with anyone else (or if that person is willing to
re-clone their sources). The simplest thing to do is:</p>
<ol style="list-style-type: decimal">
<li>Delete the <code>.git</code> directory entirely</li>
<li>Run <code>orderly2::orderly_gitignore_update("(root)")</code> to set
up a reasonable <code>.gitignore</code> that will prevent this situation
happening again</li>
<li>Run <code>git add .</code> to add everything back in (review this
with <code>git status</code> to make sure you’re happy)</li>
<li>Run <code>git commit -m "Initial commit"</code> to create a single
commit that contains all the files in currently in your repo <em>with no
history</em>, and also with no <code>.outpack</code> files</li>
</ol>
<p>If you have previously pushed this repo to GitHub or similar then you
will need to set that up again</p>
<ol start="5" style="list-style-type: decimal">
<li>
<code>git remote add origin https://github.com/user/repo</code>
(replacing <code>user/repo</code> with your path, or using
<code>git@github.com:user/repo</code> if you use ssh to talk with
GitHub)</li>
<li>
<code>git branch -M main</code> assuming you are using
<code>main</code> for your default branch, which is now most common</li>
<li><code>git push --force -u origin main</code></li>
</ol>
<p>Note that this is <strong>destructive</strong> and will require
coordination with any collaborators as you have changed history.</p>
</div>
<div class="section level3">
<h3 id="i-just-want-this-to-go-away-and-nothing-i-have-committed-is-very-large">I just want this to go away and nothing I have committed is very
large<a class="anchor" aria-label="anchor" href="#i-just-want-this-to-go-away-and-nothing-i-have-committed-is-very-large"></a>
</h3>
<p>If you do care about your history, but you also have only committed a
few files (e.g., you have committed files from <code>.outpack/</code>
which are small but not a large 100MB file in <code>archive/</code> that
is preventing you <a href="https://docs.github.com/en/repositories/working-with-files/managing-large-files/about-large-files-on-github" class="external-link">pushing
to GitHub</a>) then you could just delete the offending files from git
without updating the history, or affecting your local copies.</p>
<ol style="list-style-type: decimal">
<li>Run <code>git rm --cached .outpack</code> (repeating with
<code>draft</code> and <code>archive</code> as needed)</li>
<li>Run <code>orderly2::orderly_gitignore_update("(root)")</code> to set
up a reasonable <code>.gitignore</code> that will prevent this situation
happening again</li>
<li>Run <code>git add .gitignore</code> to also stage this</li>
<li>Run <code>git commit -m "Delete unwanted outpack files"</code>
</li>
</ol>
<p>You can then push this without any issues.</p>
</div>
<div class="section level3">
<h3 id="i-care-about-my-history-but-want-this-stuff-gone">I care about my history but want this stuff gone<a class="anchor" aria-label="anchor" href="#i-care-about-my-history-but-want-this-stuff-gone"></a>
</h3>
<p>If you are working on a branch, and the unwanted files were committed
on that branch, the simplest thing to do is to copy the changes you have
made somewhere safe, create a new branch against the current
<code>main</code> and copy those changes over there. You could do this
somewhat automatically by generating and applying a patch:</p>
<pre><code>git diff -- src &gt; changes.patch
git checkout main
git checkout -b changes-attempt2
git apply changes.patch
git push -u origin changes-attempt2</code></pre>
<p>If the unwanted files have been committed onto your default branch,
then you will have to do some potentially gory history rewriting. See <a href="https://stackoverflow.com/questions/10067848/remove-folder-and-its-contents-from-git-githubs-history" class="external-link">this
StackOverflow question</a>, the <a href="https://git-scm.com/docs/git-filter-branch#_warning" class="external-link">git docs</a>
and <a href="https://github.com/newren/git-filter-repo/" class="external-link">the currently
recommended tool for doing this</a>. Good luck!</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Robert Ashton, Martin Eden, Alex Hill, Wes Hinsley, Mantra Kusumgar, Paul Liétar, James Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
