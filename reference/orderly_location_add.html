<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add a new location — orderly_location_add • orderly2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add a new location — orderly_location_add"><meta name="description" content="Add a new location - a place where other packets might be found
and pulled into your local archive.  Currently only file and http
based locations are supported, with limited support for custom
locations. Note that adding a location does not pull metadata
from it, you need to call
orderly_location_fetch_metadata first.  The function
orderly_location_add can add any sort of location, but the other
functions documented here (orderly_location_add_path, etc) will
typically be much easier to use in practice."><meta property="og:description" content="Add a new location - a place where other packets might be found
and pulled into your local archive.  Currently only file and http
based locations are supported, with limited support for custom
locations. Note that adding a location does not pull metadata
from it, you need to call
orderly_location_fetch_metadata first.  The function
orderly_location_add can add any sort of location, but the other
functions documented here (orderly_location_add_path, etc) will
typically be much easier to use in practice."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orderly2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.99.81</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/orderly2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to orderly2</a></li>
    <li><a class="dropdown-item" href="../articles/dependencies.html">Dependencies between packets</a></li>
    <li><a class="dropdown-item" href="../articles/collaboration.html">Collaborative analysis</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/migrating.html">Migrating from orderly (1.x)</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Outpack metadata</a></li>
    <li><a class="dropdown-item" href="../articles/query.html">Orderly query DSL</a></li>
    <li><a class="dropdown-item" href="../articles/plugins.html">Creating plugins</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/orderly2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add a new location</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/orderly2/blob/main/R/location.R" class="external-link"><code>R/location.R</code></a></small>
      <div class="d-none name"><code>orderly_location_add.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add a new location - a place where other packets might be found
and pulled into your local archive.  Currently only file and http
based locations are supported, with limited support for custom
locations. Note that adding a location does <em>not</em> pull metadata
from it, you need to call
<a href="orderly_location_fetch_metadata.html">orderly_location_fetch_metadata</a> first.  The function
<code>orderly_location_add</code> can add any sort of location, but the other
functions documented here (<code>orderly_location_add_path</code>, etc) will
typically be much easier to use in practice.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orderly_location_add</span><span class="op">(</span><span class="va">name</span>, <span class="va">type</span>, <span class="va">args</span>, verify <span class="op">=</span> <span class="cn">TRUE</span>, root <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orderly_location_add_path</span><span class="op">(</span><span class="va">name</span>, <span class="va">path</span>, verify <span class="op">=</span> <span class="cn">TRUE</span>, root <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orderly_location_add_http</span><span class="op">(</span><span class="va">name</span>, <span class="va">url</span>, verify <span class="op">=</span> <span class="cn">TRUE</span>, root <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orderly_location_add_packit</span><span class="op">(</span></span>
<span>  <span class="va">name</span>,</span>
<span>  <span class="va">url</span>,</span>
<span>  token <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_token <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verify <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  root <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>The short name of the location to use.  Cannot be in
use, and cannot be one of <code>local</code> or <code>orphan</code></p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The type of location to add. Currently supported
values are <code>path</code> (a location that exists elsewhere on the
filesystem) and <code>http</code> (a location accessed over outpack's http
API).</p></dd>


<dt id="arg-args">args<a class="anchor" aria-label="anchor" href="#arg-args"></a></dt>
<dd><p>Arguments to the location driver. The arguments here
will vary depending on the type used, see Details.</p></dd>


<dt id="arg-verify">verify<a class="anchor" aria-label="anchor" href="#arg-verify"></a></dt>
<dd><p>Logical, indicating if we should verify that the
location can be used before adding.</p></dd>


<dt id="arg-root">root<a class="anchor" aria-label="anchor" href="#arg-root"></a></dt>
<dd><p>The path to the root directory, or <code>NULL</code> (the
default) to search for one from the current working
directory. This function does not require that the directory is
configured for orderly, and can be any <code>outpack</code> root (see
<a href="orderly_init.html">orderly_init</a> for details).</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>The path to the other archive root. This can be a
relative or absolute path, with different tradeoffs.  If you use
an absolute path, then this location will typically work well on
this machine, but it may behave poorly when the location is
found on a shared drive <strong>and</strong> when you use your orderly root
from more than one system.  This setup is common when using an
HPC system.  If you use a relative path, then we will interpret
it <strong>relative to your orderly root</strong> and not the directory that
you evaluate this command from.  Typically your path should
include leading dots (e.g. <code>../../somewhere/else</code>) as you should
not nest orderly projects.  This approach should work fine on
shared filesystems.</p></dd>


<dt id="arg-url">url<a class="anchor" aria-label="anchor" href="#arg-url"></a></dt>
<dd><p>The location of the server, including protocol, for
example <code>http://example.com:8080</code></p></dd>


<dt id="arg-token">token<a class="anchor" aria-label="anchor" href="#arg-token"></a></dt>
<dd><p>The value for your your login token (currently this
is a GitHub token with <code>read:org</code> scope). If <code>NULL</code>, orderly2
will perform an interactive authentication against GitHub to
obtain one.</p></dd>


<dt id="arg-save-token">save_token<a class="anchor" aria-label="anchor" href="#arg-save-token"></a></dt>
<dd><p>If no token is provided and interactive
authentication is used, this controls whether the GitHub token
should be saved to disk.  Defaults to <code>TRUE</code> if <code>NULL</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Nothing</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>We currently support three types of locations - <code>path</code>, which points
to an outpack archive accessible by path (e.g., on the same
computer or on a mounted network share), <code>http</code>, which requires
that an outpack server is running at some url and uses an HTTP API
to communicate, and <code>packit</code>, which uses Packit as a web
server.  More types may be added later, and more configuration
options to these location types will definitely be needed in
future.</p>
<p>Configuration options for different location types are described
in the arguments to their higher-level functions.</p>
<p><strong>Path locations</strong>:</p>
<p>Use <code>orderly_location_add_path</code>, which accepts a <code>path</code> argument.</p>
<p><strong>HTTP locations</strong>:</p>
<p>Accessing outpack over HTTP requires that an outpack server is
running. The interface here is expected to change as we expand
the API, but also as we move to support things like TLS and
authentication.</p>
<p>Use <code>orderly_location_add_http</code>, which accepts a <code>url</code> argument.</p>
<p><strong>Packit locations</strong>:</p>
<p>Packit locations work over HTTPS, and include everything in an
outpack location but also provide authentication and later will
have more capabilities we think.</p>
<p>Use <code>orderly_location_add_packit</code>, which accepts <code>url</code>, <code>token</code>
and <code>save_token</code> arguments.</p>
<p><strong>Custom locations</strong>:</p>
<p>All outpack implementations are expected to support path and http
locations, with the standard arguments above.  But we expect that
some implementations will support custom locations, and that the
argument lists for these may vary between implementations. To
allow this, you can pass a location of type "custom" with a list
of arguments.  We expect an argument 'driver' to be present among
this list.  For an example of this in action, see the
<a href="https://mrc-ide.github.io/outpack.sharepoint" class="external-link"><code>outpack.sharepoint</code></a>
package.</p>
<p><em>Be warned that we may change this interface in future, in which
case you may need to update your configuration.</em></p>
    </div>
    <div class="section level2">
    <h2 id="warning">Warning<a class="anchor" aria-label="anchor" href="#warning"></a></h2>



<p>The API here may change as we move to support different types of
locations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Two roots, one local and one representing some remote orderly location:</span></span></span>
<span class="r-in"><span><span class="va">local</span> <span class="op">&lt;-</span> <span class="fu"><a href="orderly_example.html">orderly_example</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created orderly root at '/tmp/Rtmp6Hh44x/orderly2_ex_1d3e5a3bb00e'</span>
<span class="r-in"><span><span class="va">remote</span> <span class="op">&lt;-</span> <span class="fu"><a href="orderly_example.html">orderly_example</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created orderly root at '/tmp/Rtmp6Hh44x/orderly2_ex_1d3e6f6008de'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We create a packet in the remote root:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_run.html">orderly_run</a></span><span class="op">(</span><span class="st">"data"</span>, root <span class="op">=</span> <span class="va">remote</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Starting packet '<span style="color: #0000BB;">data</span>' `20250901-150644-42bc5538` at 2025-09-01 15:06:44.265203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; orderly_description(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> +   display = "A demo data set")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; x &lt;- jitter(1:30)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; y &lt;- 0.4 * x + 5 + rnorm(length(x), sd = 2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; d &lt;- data.frame(x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; orderly_artefact("data.rds", description = "A synthetic dataset")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; saveRDS(d, "data.rds")</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished running <span style="color: #0000BB;">data.R</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Finished 20250901-150644-42bc5538 at 2025-09-01 15:06:44.290836 (0.02563286 secs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "20250901-150644-42bc5538"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add the remote as a path location to the local root:</span></span></span>
<span class="r-in"><span><span class="fu">orderly_location_add_path</span><span class="op">(</span><span class="st">"remote"</span>, <span class="va">remote</span>, root <span class="op">=</span> <span class="va">local</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Testing location</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Location configured successfully</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Added location 'remote' (path)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pull metadata from 'remote' into our local version</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_location_fetch_metadata.html">orderly_location_fetch_metadata</a></span><span class="op">(</span>root <span class="op">=</span> <span class="va">local</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Fetching metadata from 1 location: 'remote'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Found 1 packet at 'remote', of which 1 is new</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pull a packet into our local version</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_location_pull.html">orderly_location_pull</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">latest</span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"data"</span><span class="op">)</span><span class="op">)</span>, root <span class="op">=</span> <span class="va">local</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Pulling 1 packet: '20250901-150644-42bc5538'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Looking for suitable files already on disk</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Need to fetch 2 files (821 B) from 1 location</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ⠙ Fetching file 1/2 (227 B) from 'remote' | ETA:  0s [3ms]</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Fetched 2 files (821 B) from 'remote' in 24ms.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Unpacked 1 packet</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Drop the location</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_location_remove.html">orderly_location_remove</a></span><span class="op">(</span><span class="st">"remote"</span>, root <span class="op">=</span> <span class="va">local</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Robert Ashton, Martin Eden, Alex Hill, Wes Hinsley, Mantra Kusumgar, Paul Liétar, James Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

