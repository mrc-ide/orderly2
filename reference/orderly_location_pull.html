<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Pull one or more packets from a location — orderly_location_pull • orderly2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pull one or more packets from a location — orderly_location_pull"><meta name="description" content="Pull one or more packets (including all their files) into this
archive from one or more of your locations. This will make files
available for use as dependencies (e.g., with
orderly_dependency)."><meta property="og:description" content="Pull one or more packets (including all their files) into this
archive from one or more of your locations. This will make files
available for use as dependencies (e.g., with
orderly_dependency)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orderly2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.99.81</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/orderly2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to orderly2</a></li>
    <li><a class="dropdown-item" href="../articles/dependencies.html">Dependencies between packets</a></li>
    <li><a class="dropdown-item" href="../articles/collaboration.html">Collaborative analysis</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/migrating.html">Migrating from orderly (1.x)</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Outpack metadata</a></li>
    <li><a class="dropdown-item" href="../articles/query.html">Orderly query DSL</a></li>
    <li><a class="dropdown-item" href="../articles/plugins.html">Creating plugins</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/orderly2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Pull one or more packets from a location</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/orderly2/blob/main/R/location.R" class="external-link"><code>R/location.R</code></a></small>
      <div class="d-none name"><code>orderly_location_pull.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Pull one or more packets (including all their files) into this
archive from one or more of your locations. This will make files
available for use as dependencies (e.g., with
<a href="orderly_dependency.html">orderly_dependency</a>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orderly_location_pull</span><span class="op">(</span></span>
<span>  <span class="va">expr</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  location <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fetch_metadata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  recursive <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  root <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-expr">expr<a class="anchor" aria-label="anchor" href="#arg-expr"></a></dt>
<dd><p>The query expression. A <code>NULL</code> expression matches everything.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Optionally, the name of the packet to scope the query on. This
will be intersected with <code>scope</code> arg and is a shorthand way of running
<code>scope = list(name = "name")</code></p></dd>


<dt id="arg-location">location<a class="anchor" aria-label="anchor" href="#arg-location"></a></dt>
<dd><p>Optional vector of locations to pull from. We
might in future expand this to allow wildcards or exceptions.</p></dd>


<dt id="arg-fetch-metadata">fetch_metadata<a class="anchor" aria-label="anchor" href="#arg-fetch-metadata"></a></dt>
<dd><p>Logical, indicating if we should pull
metadata immediately before the search. If <code>location</code> is given,
then we will pass this through to
<a href="orderly_location_fetch_metadata.html">orderly_location_fetch_metadata</a> to filter locations
to update.  If pulling many packets in sequence, you <em>will</em> want
to update this option to <code>FALSE</code> after the first pull, otherwise
it will update the metadata between every packet, which will be
needlessly slow.</p></dd>


<dt id="arg-recursive">recursive<a class="anchor" aria-label="anchor" href="#arg-recursive"></a></dt>
<dd><p>If non-NULL, a logical, indicating if we should
recursively pull all packets that are referenced by the packets
specified in <code>id</code>.  This might copy a lot of data!  If <code>NULL</code>,
we default to the value given by the the configuration option
<code>require_complete_tree</code>.</p></dd>


<dt id="arg-options">options<a class="anchor" aria-label="anchor" href="#arg-options"></a></dt>
<dd><p><strong>DEPRECATED</strong>. Please don't use this any more, and
instead use the arguments <code>location</code>, <code>allow_remote</code> and
<code>fetch_metadata</code> directly.</p></dd>


<dt id="arg-root">root<a class="anchor" aria-label="anchor" href="#arg-root"></a></dt>
<dd><p>The path to the root directory, or <code>NULL</code> (the
default) to search for one from the current working
directory. This function does not require that the directory is
configured for orderly, and can be any <code>outpack</code> root (see
<a href="orderly_init.html">orderly_init</a> for details).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly, the ids of packets that were pulled</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>It is possible that it will take a long time to pull packets, if
you are moving a lot of data or if you are operating over a slow
connection.  Cancelling and resuming a pull should be fairly
efficient, as we keep track of files that are copied over even in
the case of an interrupted pull.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Two roots, one local and one representing some remote orderly location:</span></span></span>
<span class="r-in"><span><span class="va">local</span> <span class="op">&lt;-</span> <span class="fu"><a href="orderly_example.html">orderly_example</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created orderly root at '/tmp/Rtmp6Hh44x/orderly2_ex_1d3e568cd66b'</span>
<span class="r-in"><span><span class="va">remote</span> <span class="op">&lt;-</span> <span class="fu"><a href="orderly_example.html">orderly_example</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created orderly root at '/tmp/Rtmp6Hh44x/orderly2_ex_1d3e7a7f26c1'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We create a packet in the remote root:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_run.html">orderly_run</a></span><span class="op">(</span><span class="st">"data"</span>, root <span class="op">=</span> <span class="va">remote</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Starting packet '<span style="color: #0000BB;">data</span>' `20250901-150645-543d39be` at 2025-09-01 15:06:45.333504</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; orderly_description(</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> +   display = "A demo data set")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; x &lt;- jitter(1:30)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; y &lt;- 0.4 * x + 5 + rnorm(length(x), sd = 2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; d &lt;- data.frame(x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; orderly_artefact("data.rds", description = "A synthetic dataset")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; saveRDS(d, "data.rds")</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished running <span style="color: #0000BB;">data.R</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Finished 20250901-150645-543d39be at 2025-09-01 15:06:45.358531 (0.02502728 secs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "20250901-150645-543d39be"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add the remote as a path location to the local root:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_location_add.html">orderly_location_add_path</a></span><span class="op">(</span><span class="st">"remote"</span>, <span class="va">remote</span>, root <span class="op">=</span> <span class="va">local</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Testing location</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Location configured successfully</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Added location 'remote' (path)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pull a packet into our local version</span></span></span>
<span class="r-in"><span><span class="fu">orderly_location_pull</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu">latest</span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"data"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      fetch_metadata <span class="op">=</span> <span class="cn">TRUE</span>, root <span class="op">=</span> <span class="va">local</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Fetching metadata from 1 location: 'remote'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Found 1 packet at 'remote', of which 1 is new</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Pulling 1 packet: '20250901-150645-543d39be'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Looking for suitable files already on disk</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Need to fetch 2 files (823 B) from 1 location</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Unpacked 1 packet</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Robert Ashton, Martin Eden, Alex Hill, Wes Hinsley, Mantra Kusumgar, Paul Liétar, James Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

