<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Declare a dependency — orderly_dependency • orderly2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Declare a dependency — orderly_dependency"><meta name="description" content="Declare a dependency on another packet"><meta property="og:description" content="Declare a dependency on another packet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orderly2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.99.81</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/orderly2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to orderly2</a></li>
    <li><a class="dropdown-item" href="../articles/dependencies.html">Dependencies between packets</a></li>
    <li><a class="dropdown-item" href="../articles/collaboration.html">Collaborative analysis</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/migrating.html">Migrating from orderly (1.x)</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Outpack metadata</a></li>
    <li><a class="dropdown-item" href="../articles/query.html">Orderly query DSL</a></li>
    <li><a class="dropdown-item" href="../articles/plugins.html">Creating plugins</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/orderly2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Declare a dependency</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/orderly2/blob/main/R/metadata.R" class="external-link"><code>R/metadata.R</code></a></small>
      <div class="d-none name"><code>orderly_dependency.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Declare a dependency on another packet</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orderly_dependency</span><span class="op">(</span><span class="va">name</span>, <span class="va">query</span>, <span class="va">files</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>The name of the packet to depend on</p></dd>


<dt id="arg-query">query<a class="anchor" aria-label="anchor" href="#arg-query"></a></dt>
<dd><p>The query to search for; often this will simply be
the string <code>latest</code>, indicating the most recent version. You may
want a more complex query here though.</p></dd>


<dt id="arg-files">files<a class="anchor" aria-label="anchor" href="#arg-files"></a></dt>
<dd><p>Files to copy from the other packet, as a character vector.
If the character vector is unnamed, the files listed are copied over
without changing their names. If the vector is named however, the names
will be used as the destination name for the files.</p>
<p>In either case, if you want to import a directory of files from a
packet, you must refer to the source with a trailing slash
(e.g., <code>c(here = "there/")</code>), which will create the local
directory <code>here/...</code> with files from the upstream packet
directory <code>there/</code>. If you omit the slash then an error will be
thrown suggesting that you add a slash if this is what you
intended.</p>
<p>You can use a limited form of string interpolation in the names of
this argument; using <code>${variable}</code> will pick up values from
<code>envir</code> and substitute them into your string.  This is similar
to the interpolation you might be familiar with from
<code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue</a></code> or similar, but much simpler with no concatenation
or other fancy features supported.</p>
<p>Note that there is an unfortunate, but (to us) avoidable
inconsistency here; interpolation of values from your
environment in the query is done by using <code>environment:x</code> and in
the destination filename by doing <code>${x}</code>.</p>
<p>If you want to copy <em>all</em> files from the packet, use <code>./</code> (read
this as the directory of the packet).  The trailing slash is
required in order to be consistent with the rules above.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Undefined</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See <a href="orderly_run.html">orderly_run</a> for some details about how search
options are used to select which locations packets are found from,
and if any data is fetched over the network. If you are running
interactively, this will obviously not work, so you should use
<code><a href="orderly_interactive_set_search_options.html">orderly_interactive_set_search_options()</a></code> to set the
options that this function will respond to.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="orderly_example_show.html">orderly_example_show</a></span><span class="op">(</span><span class="st">"depends"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">src/depends/depends.R</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># Depend on 'data.rds' from 'data' as 'xy.rds', using the most recent</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># packet:</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">orderly_dependency</span><span style="color: #D7AF00;">(</span><span style="color: #00AFAF;">"data"</span>, <span style="color: #00AFAF;">"latest"</span>, <span style="font-weight: bold;">c</span><span style="color: #BBBB00;">(</span><span style="color: #00AFAF;">"xy.rds"</span> = <span style="color: #00AFAF;">"data.rds"</span><span style="color: #BBBB00;">)</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># When the report runs, or when you run through interactively, the</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># file 'xy.rds' will be present and you can ready it as normal</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> xy <span style="color: #D7AF00;">&lt;-</span> <span style="font-weight: bold;">readRDS</span><span style="color: #D7AF00;">(</span><span style="color: #00AFAF;">"xy.rds"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># The rest of the analysis would then proceed as usual</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">orderly_artefact</span><span style="color: #D7AF00;">(</span><span style="color: #00AFAF;">"plot.png"</span>, description = <span style="color: #00AFAF;">"A plot of data"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">png</span><span style="color: #D7AF00;">(</span><span style="color: #00AFAF;">"plot.png"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">plot</span><span style="color: #D7AF00;">(</span>xy<span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">dev.off</span><span style="color: #D7AF00;">()</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Robert Ashton, Martin Eden, Alex Hill, Wes Hinsley, Mantra Kusumgar, Paul Liétar, James Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

