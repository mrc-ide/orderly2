<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Copy files from a packet — outpack_copy_files • orderly2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Copy files from a packet — outpack_copy_files"><meta property="og:description" content="Copy files from a packet to anywhere. Similar to
outpack_packet_use_dependency except that this is not
used in an active packet context. You can use this function to
pull files from an outpack root to a directory outside of the
control of outpack, for example."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">orderly2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.99.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/orderly2.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction.html">Introduction to orderly2</a>
    </li>
    <li>
      <a href="../articles/metadata.html">Outpack metadata</a>
    </li>
    <li>
      <a href="../articles/migrating.html">Migrating from orderly (1.x)</a>
    </li>
    <li>
      <a href="../articles/plugins.html">Orderly plugins</a>
    </li>
    <li>
      <a href="../articles/query.html">Outpack query DSL</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mrc-ide/orderly2/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Copy files from a packet</h1>
    <small class="dont-index">Source: <a href="https://github.com/mrc-ide/orderly2/blob/HEAD/R/outpack_helpers.R" class="external-link"><code>R/outpack_helpers.R</code></a></small>
    <div class="hidden name"><code>outpack_copy_files.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Copy files from a packet to anywhere. Similar to
<a href="outpack_packet.html">outpack_packet_use_dependency</a> except that this is not
used in an active packet context. You can use this function to
pull files from an outpack root to a directory outside of the
control of outpack, for example.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">outpack_copy_files</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  <span class="va">files</span>,</span>
<span>  <span class="va">dest</span>,</span>
<span>  allow_remote <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  root <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>id</dt>
<dd><p>Optionally, an outpack id via <a href="outpack_id.html">outpack_id</a>. If
not given a new id will be generated.</p></dd>


<dt>files</dt>
<dd><p>Files to copy from the other packet. This can be (1)
a character vector, in which case files are copied over without
changing their names, (2) a <strong>named</strong> character vector, in which
case the name will be used as the destination name, or (3) a
<a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> (including <code>tbl_df</code>, or <code>data.frame</code> objects)
containing columns <code>from</code> and <code>to</code>, in which case the files
<code>from</code> will be copied with names <code>to</code>.</p>
<p>In all cases, if you want to import a directory of files from a
packet, you must refer to the source with a trailing slash
(e.g., <code>c(here = "there/")</code>), which will create the local
directory <code>here/...</code> with files from the upstream packet
directory <code>there/</code>. If you omit the slash then an error will be
thrown suggesting that you add a slash if this is what you
intended.</p>
<p>You can use a limited form of string interpolation in the names of
this argument; using <code>${variable}</code> will pick up values from
<code>envir</code> and substitute them into your string.  This is similar
to the interpolation you might be familiar with from
<code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue</a></code> or similar, but much simpler with no concatenation
or other fancy features supported.</p>
<p>Note that there is an unfortunate, but (to us) avoidable
inconsistency here; interpolation of values from your
environment in the query is done by using <code>environment:x</code> and in
the destination filename by doing <code>${x}</code>.</p></dd>


<dt>dest</dt>
<dd><p>The directory to copy into</p></dd>


<dt>allow_remote</dt>
<dd><p>Logical, indicating if we should attempt to
retrieve the file from any remote location if it cannot be found
locally. If the file is large, this may take some time depending
on the speed of the connection. If you use a file store, note
that this does add the downloaded file into your file store,
though associated with no packet so that it is subject to
garbage collection (once we write support for that).</p></dd>


<dt>overwrite</dt>
<dd><p>Overwrite files at the destination; this is
typically what you want, but set to <code>FALSE</code> if you would prefer
that an error be thrown if the destination file already exists.</p></dd>


<dt>envir</dt>
<dd><p>An environment into which string interpolation may
happen (see <a href="outpack_packet.html">outpack_packet_use_dependency</a> for
details on the string interpolation).  The default here is to
use the calling environment, which is typically reasonable, but
may need changing in programmatic use.</p></dd>


<dt>root</dt>
<dd><p>The outpack root. Will be searched for from the
current directory if not given.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Nothing, invisibly. Primarily called for its side effect
of copying files from a packet into the directory <code>dest</code></p>


    </div>
    <div id="details">
    <h2>Details</h2>
    <p>There are different ways that this might fail (or recover from
failure):</p><ul><li><p>if <code>id</code> is not known in the metadata store (not known because
it's not unpacked but also not known to be present in some other
remote) then this will fail because it's impossible to resolve
the files. Consider refreshing the metadata with
<a href="outpack_location_pull_metadata.html">outpack_location_pull_metadata</a> to refresh this.</p></li>
<li><p>if the <code>id</code> is not unpacked <em>and</em> no local copy of the files
referred to can be found, we error by default (but see the next
option). However, sometimes the file you refer to might also be
present because you have downloaded a packet that depended on
it, or because the content of the file is unchanged because from
some other packet version you have locally.</p></li>
<li><p>if the <code>id</code> is not unpacked, there is no local copy of the file
and if <code>allow_remote</code> is <code>TRUE</code> we will try and request the file
from whatever remote would be selected by
<a href="outpack_location_pull_packet.html">outpack_location_pull_packet</a> for this packet.</p></li>
</ul><p>Note that empty directories might be created on failure.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rich FitzJohn, Robert Ashton, Alex Hill.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

