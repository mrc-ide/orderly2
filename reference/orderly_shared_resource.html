<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Copy shared resources into a packet directory — orderly_shared_resource • orderly2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Copy shared resources into a packet directory — orderly_shared_resource"><meta name="description" content="Copy shared resources into a packet directory. You can use this to
share common resources (data or code) between multiple packets.
Additional metadata will be added to keep track of where the files
came from.  Using this function requires the shared resources
directory shared/ exists at the orderly root; an error will be
raised if this is not configured when we attempt to fetch files."><meta property="og:description" content="Copy shared resources into a packet directory. You can use this to
share common resources (data or code) between multiple packets.
Additional metadata will be added to keep track of where the files
came from.  Using this function requires the shared resources
directory shared/ exists at the orderly root; an error will be
raised if this is not configured when we attempt to fetch files."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orderly2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.99.81</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/orderly2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to orderly2</a></li>
    <li><a class="dropdown-item" href="../articles/dependencies.html">Dependencies between packets</a></li>
    <li><a class="dropdown-item" href="../articles/collaboration.html">Collaborative analysis</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/migrating.html">Migrating from orderly (1.x)</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Outpack metadata</a></li>
    <li><a class="dropdown-item" href="../articles/query.html">Orderly query DSL</a></li>
    <li><a class="dropdown-item" href="../articles/plugins.html">Creating plugins</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/orderly2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Copy shared resources into a packet directory</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/orderly2/blob/main/R/metadata.R" class="external-link"><code>R/metadata.R</code></a></small>
      <div class="d-none name"><code>orderly_shared_resource.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Copy shared resources into a packet directory. You can use this to
share common resources (data or code) between multiple packets.
Additional metadata will be added to keep track of where the files
came from.  Using this function requires the shared resources
directory <code>shared/</code> exists at the orderly root; an error will be
raised if this is not configured when we attempt to fetch files.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orderly_shared_resource</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>The shared resources to copy. If arguments are named, the name
will be the destination file while the value is the filename within the
shared resource directory.</p>
<p>You can use a limited form of string interpolation in the names of
this argument; using <code>${variable}</code> will pick up values from
<code>envir</code> and substitute them into your string.  This is similar
to the interpolation you might be familiar with from
<code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue</a></code> or similar, but much simpler with no concatenation
or other fancy features supported.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly, a data.frame with columns <code>here</code> (the filenames
as as copied into the running packet) and <code>there</code> (the filenames
within <code>shared/</code>).  Do not rely on the ordering where directory
expansion was performed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># An example in context within the orderly examples:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_example_show.html">orderly_example_show</a></span><span class="op">(</span><span class="st">"shared"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">src/shared/shared.R</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># Pull in the file 'shared/palette.R' as 'cols.R'</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">orderly_shared_resource</span><span style="color: #D7AF00;">(</span>cols.R = <span style="color: #00AFAF;">"palette.R"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># Then source it, as usual</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">source</span><span style="color: #D7AF00;">(</span><span style="color: #00AFAF;">"cols.R"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># And use the function 'palette()' found within</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">png</span><span style="color: #D7AF00;">(</span><span style="color: #00AFAF;">"volcano.png"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">image</span><span style="color: #D7AF00;">(</span>volcano, col = <span style="font-weight: bold;">palette</span><span style="color: #BBBB00;">()</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">dev.off</span><span style="color: #D7AF00;">()</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Here's the directory structure for this example:</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="orderly_example.html">orderly_example</a></span><span class="op">(</span>names <span class="op">=</span> <span class="st">"shared"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created orderly root at '/tmp/Rtmp6Hh44x/orderly2_ex_1d3e15482783'</span>
<span class="r-in"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">/tmp/Rtmp6Hh44x/orderly2_ex_1d3e15482783</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├── orderly_config.yml</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├── <span style="color: #0000BB; font-weight: bold;">shared</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │   └── <span style="color: #00BB00;">palette.R</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └── <span style="color: #0000BB; font-weight: bold;">src</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     └── <span style="color: #0000BB; font-weight: bold;">shared</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         └── <span style="color: #00BB00;">shared.R</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can run this packet:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_run.html">orderly_run</a></span><span class="op">(</span><span class="st">"shared"</span>, root <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Starting packet '<span style="color: #0000BB;">shared</span>' `20250901-150654-8b6449fa` at 2025-09-01 15:06:54.548933</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; # Pull in the file 'shared/palette.R' as 'cols.R'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; orderly_shared_resource(cols.R = "palette.R")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; # Then source it, as usual</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; source("cols.R")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; # And use the function 'palette()' found within</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; png("volcano.png")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; image(volcano, col = palette())</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; dev.off()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> agg_record_896085249 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    2 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Finished running <span style="color: #0000BB;">shared.R</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Finished 20250901-150654-8b6449fa at 2025-09-01 15:06:54.593581 (0.04464841 secs)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "20250901-150654-8b6449fa"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># In the final archive version of the packet, 'cols.R' is copied</span></span></span>
<span class="r-in"><span><span class="co"># over from `shared/`, so we have a copy of the version of the code</span></span></span>
<span class="r-in"><span><span class="co"># that was used in the analysis</span></span></span>
<span class="r-in"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB; font-weight: bold;">/tmp/Rtmp6Hh44x/orderly2_ex_1d3e15482783</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├── <span style="color: #0000BB; font-weight: bold;">archive</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │   └── <span style="color: #0000BB; font-weight: bold;">shared</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │       └── <span style="color: #0000BB; font-weight: bold;">20250901-150654-8b6449fa</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │           ├── <span style="color: #00BB00;">cols.R</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │           ├── <span style="color: #00BB00;">shared.R</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │           └── <span style="color: #BB00BB; font-weight: bold;">volcano.png</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├── <span style="color: #0000BB; font-weight: bold;">draft</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │   └── <span style="color: #0000BB; font-weight: bold;">shared</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├── orderly_config.yml</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├── <span style="color: #0000BB; font-weight: bold;">shared</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> │   └── <span style="color: #00BB00;">palette.R</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └── <span style="color: #0000BB; font-weight: bold;">src</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     └── <span style="color: #0000BB; font-weight: bold;">shared</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         └── <span style="color: #00BB00;">shared.R</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Robert Ashton, Martin Eden, Alex Hill, Wes Hinsley, Mantra Kusumgar, Paul Liétar, James Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

