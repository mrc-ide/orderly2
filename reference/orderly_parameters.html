<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Declare orderly parameters — orderly_parameters • orderly2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Declare orderly parameters — orderly_parameters"><meta name="description" content="Declare orderly parameters. You should only have one call to this
within your file! Typically you'd put the call to this function
very close to the top so that it's easy to scan, though the order
does not really matter.  Parameters are scalar atomic values
(e.g. a string, number or boolean) and defaults must be present
literally (i.e., they may not come from a variable
itself). Provide NULL if you do not have a default, in which
case this parameter will be required."><meta property="og:description" content="Declare orderly parameters. You should only have one call to this
within your file! Typically you'd put the call to this function
very close to the top so that it's easy to scan, though the order
does not really matter.  Parameters are scalar atomic values
(e.g. a string, number or boolean) and defaults must be present
literally (i.e., they may not come from a variable
itself). Provide NULL if you do not have a default, in which
case this parameter will be required."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orderly2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.99.81</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/orderly2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to orderly2</a></li>
    <li><a class="dropdown-item" href="../articles/dependencies.html">Dependencies between packets</a></li>
    <li><a class="dropdown-item" href="../articles/collaboration.html">Collaborative analysis</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/migrating.html">Migrating from orderly (1.x)</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Outpack metadata</a></li>
    <li><a class="dropdown-item" href="../articles/query.html">Orderly query DSL</a></li>
    <li><a class="dropdown-item" href="../articles/plugins.html">Creating plugins</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/orderly2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Declare orderly parameters</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/orderly2/blob/main/R/metadata.R" class="external-link"><code>R/metadata.R</code></a></small>
      <div class="d-none name"><code>orderly_parameters.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Declare orderly parameters. You should only have one call to this
within your file! Typically you'd put the call to this function
very close to the top so that it's easy to scan, though the order
does not really matter.  Parameters are scalar atomic values
(e.g. a string, number or boolean) and defaults must be present
literally (i.e., they may not come from a variable
itself). Provide <code>NULL</code> if you do not have a default, in which
case this parameter will be required.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orderly_parameters</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Any number of parameters</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of parameters.  This list is "strict" so accessing
elements that are not present will throw an error rather than
returning <code>NULL</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="parameters-and-variables">Parameters and variables<a class="anchor" aria-label="anchor" href="#parameters-and-variables"></a></h2>
    <p>Prior to orderly 1.99.61, parameters are always available as
variables in the execution environment.  In order to harmonise the
R and Python versions of orderly, we are moving away from this, at
least by default.  The recommended way of using parameters is to
assign it to a variable, for example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>pars <span class="ot">&lt;-</span> <span class="fu">orderly_parameters</span>(<span class="at">debug =</span> <span class="cn">FALSE</span>, <span class="at">replicates =</span> <span class="cn">NULL</span>)</span></code></pre><p></p></div>
<p>This defines two parameters, <code>debug</code> (with a default) and
<code>replicates</code> (without a default).  In the running report, you can
access these by subsetting the <code>pars</code> object (e.g., <code>pars$debug</code>
or <code>pars[["replicates"]]</code>).</p>
<p>To get the old behaviour, do not assign to a variable:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">orderly_parameters</span>(<span class="at">debug =</span> <span class="cn">FALSE</span>, <span class="at">replicates =</span> <span class="cn">NULL</span>)</span></code></pre><p></p></div>
<p>This will create two bindings in the environment (<code>debug</code> and
<code>replicates</code>) but will also generate a deprecation warning and we
will remove support in a release of orderly 2.x.  If you really want
the old behaviour, you can achieve it by writing:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>pars <span class="ot">&lt;-</span> <span class="fu">orderly_parameters</span>(<span class="at">debug =</span> <span class="cn">FALSE</span>, <span class="at">replicates =</span> <span class="cn">NULL</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">list2env</span>(pars, <span class="fu">environment</span>())</span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="behaviour-in-interactive-sessions">Behaviour in interactive sessions<a class="anchor" aria-label="anchor" href="#behaviour-in-interactive-sessions"></a></h2>
    <p>We want you to be able to run through an orderly report
interactively, e.g. via <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code>, by copy/paste or via the "Run"
or "Source" button in RStudio.  This is not very compatible with
use of orderly parameters, because normally you'd provide these to
<code><a href="orderly_run.html">orderly_run()</a></code>, so we need a mechanism to get the parameters from
you.</p>
<p>The behaviour differs if you have assigned the result of
<code>orderly_parameters</code> to a variable or are using the (deprecated)
behaviour of exporting parameters as variables.</p><div class="section">
<h3 id="new-behaviour">New behaviour<a class="anchor" aria-label="anchor" href="#new-behaviour"></a></h3>


<p>Suppose that you are assigning to <code>pars</code>.  The first time we run
though your code we won't see a value of <code>pars</code> and we'll prompt
for values for each parameter.  Those that have default values in
your list will offer these values to make selection of parameters
faster.</p>
<p>On subsequent calls, <code>pars</code> will be present with the values you
used previously; these will be reused.  If you want to be
re-prompted, delete <code>pars</code> (i.e., <code>rm("pars")</code>) or assign <code>NULL</code>
(i.e., <code>pars &lt;- NULL</code>).</p>
</div>

<div class="section">
<h3 id="old-behaviour">Old behaviour<a class="anchor" aria-label="anchor" href="#old-behaviour"></a></h3>


<p>This is now deprecated, and you should update your code.</p>
<p>When running interactively (i.e., via <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> or running an
orderly file session by copy/paste or in RStudio), the
<code>orderly_parameters()</code> function has different behaviour, and
this behaviour depends on whether parameters will be exported to the
environment or not.</p>
<p>First, we look in the current environment (most likely the global
environment) for values of your parameters - that is, variables
bound to the names of your parameters.  For any parameters that
are not found we will look at the default values and use these
if possible, but if not possible then we will either error or
prompt based on the global option
<code>orderly_interactive_parameters_missing_error</code>. If this is
<code>TRUE</code>, then we will ask you to enter a value for the parameters
(strings will need to be entered with quotes).</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># An example in context within the orderly examples, using the</span></span></span>
<span class="r-in"><span><span class="co"># recommended new-style syntax:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="orderly_example_show.html">orderly_example_show</a></span><span class="op">(</span><span class="st">"parameters"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">src/parameters/parameters.R</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># This declares that this orderly report accepts one parameter</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># 'max_cyl' with no default (i.e., it is required).</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pars <span style="color: #D7AF00;">&lt;-</span> <span style="font-weight: bold;">orderly_parameters</span><span style="color: #D7AF00;">(</span>max_cyl = <span style="color: #D7AF00;">NULL)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">orderly_artefact</span><span style="color: #D7AF00;">(</span><span style="color: #00AFAF;">"data.rds"</span>, description = <span style="color: #00AFAF;">"Final data"</span><span style="color: #D7AF00;">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># We can use the parameter by subsetting 'pars'; unlike regular R</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># lists you will get an error if you try and access a non-existent</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #8787AF;"># element.</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> data <span style="color: #D7AF00;">&lt;-</span> mtcars<span style="color: #D7AF00;">[</span>mtcars<span style="color: #D7AF00;">$</span>cyl <span style="color: #D7AF00;">&lt;=</span> pars<span style="color: #D7AF00;">$</span>max_cyl, <span style="color: #D7AF00;">]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">saveRDS</span><span style="color: #D7AF00;">(</span>data, <span style="color: #00AFAF;">"data.rds"</span><span style="color: #D7AF00;">)</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn, Robert Ashton, Martin Eden, Alex Hill, Wes Hinsley, Mantra Kusumgar, Paul Liétar, James Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

